# Claude Agent SDKの概要と発表背景

ステータス: 未着手

出典: [https://lilys.ai/digest/6299331/6332573/](https://lilys.ai/digest/6299331/6332573/)

目次

アンソロピックが発表した**Claude Agent SDK**の核心的な価値を、誰でも理解できるように解説する実践的なガイドです。このSDKは、自然言語で指示するだけでAIエージェントが自律的にコードを生成・実行し、データ分析や情報収集といった複雑なタスクを自動化できる画期的な仕組みを提供します。特に、CSVデータの高度な分析や、複数の情報源から情報を統合してレポートを作成する**ディープリサーチエージェント**の構築デモは必見で、従来のラグベースのQ&Aシステムよりも遥かに柔軟で高度な処理が可能であることを示しています。プログラミング知識がなくても、Claude Codeのプラグイン機能を利用すれば、**自然言語からエージェントを使ったワークフロー**を簡単に構築できるため、業務効率化を目指すビジネスパーソンや開発者にとって、AIエージェント活用の具体的な第一歩を踏み出すための**実用的なロードマップ**となるでしょう。

## 1. Claude Agent SDKの概要と発表背景

## 1.1. 発表内容とSDKの定義

1. **挨拶と自己紹介**: [音楽] はい、皆さんこんにちは、にゃんたです。  
2. **本日のテーマ**: 本日は、クロードエージェントSDKについて話していく。  
3. **発表の経緯**: 先日、言語モデルを開発しているAnthropic社から、クロードコードSDKがクロードエージェントSDKになるという発表があった。  
4. **SDKの定義**: クロードエージェントSDKは、クロードコードというツールを簡単にALE（自律的エージェント環境）に組み込める仕組みである。  
5. **Claude Codeの紹介**: クロードコードを知らない場合は、過去の動画を参照のこと。  

## 1.2. Claude Codeの機能と用途の拡大

1. **Claude Codeの機能**: 皆さんが欲しいアプリを自然言語で入力すると、AIエージェントが代わりにプログラムを作成してくれるツールである。  
2. **利用対象の拡大**: プログラマーだけでなく、ビジネス用途にも利用可能である。  
3. **実現可能なタスク**: プログラムを使うことで行えるタスクであれば、クロードコードで実現できる。  
4. **具体的な用途例**: Anthropic社内では、リサーチ業務、データ分析、メールの返信などに利用されている。  
5. **名称変更の考察**: コーディングツールだけでなく汎用的なAIエージェントツールとなったため、クロードコードSDKからクロードエージェントSDKへ名称変更されたと考えられる。  

## 2. Claude Agent SDKによる高度なデータ分析デモ

## 2.1. 従来のAIとの比較とSDKの優位性

1. **SDKで可能なこと**: AIエージェントが代わりにデータを分析するなど、プログラムを書くことで動作する。  
2. **デモの前提**: 勤務データのCSVファイルが存在し、ユーザーが「今月残業が多い人は誰なのか」と質問するシナリオを想定する。  
3. **従来のAIとの違い**: これまでのAIでは、ラグ（テキストベースのQ&A）が使われていた。  
4. **SDKによる高度化**: クロードエージェントSDKを使えば、代わりにプログラムを書いてCSVデータを分析し、その結果を元に回答を生成するなど、より高度な処理が可能になる。  
5. **本動画の目的**: クロードエージェントSDKの具体的な使い方と便利なポイントを誰でも分かるように紹介する。  

## 3. 不動産データ分析チャットボットの構築と対話デモ

## 3.1. チャットボットのセットアップと初期対話

1. **作成したアプリの紹介**: データ分析をさせて返答を返す、非常に単純なチャットボットを作成した。  
2. **使用データ**: 不動産の物件情報（物件ID、家賃、間取りなど）が記載されたCSVデータを使用する。  
3. **初期設定と対話開始**: このCSVをClaude Agent SDKに渡し、プロンプトを設定した状態でチャットを開始する。  
4. **初期応答**: 「不動産分析のチャットボットですと、ご質問やデータ分析のお手伝いをさせていただきます」という返答が返ってくる。  

## 3.2. 要件定義とエージェントによる分析実行

1. **ユーザーの曖昧な要求**: 「駅地下の物件を探しています。間取りを考えて、割安なところを探して欲しい」とざっくりとした質問をする。  
2. **エージェントからの具体化要求**: AIエージェントは、より具体的な要件を尋ねてくる（例：5分で、間取りは2LDK、予算は特に考えていない、エリアはどこでも良い）。  
3. **要件入力**: 具体的な要件を入力する。  
4. **エージェントの動作**: AIエージェントは、事前に設定されたCSVファイルを読み込み、要求に基づいて物件を探すためにプログラムを内部で書いて分析を実行する。  
5. **初回分析結果と条件緩和**: 最初の要求では「5分以内の2LDKの物件はデータにございません」と回答があり、2LDKの平均家賃が14万467円であることが示される。  
6. **条件の再設定**: 徒歩10分以内に広げること、2DKも含めることを条件として緩和し、再分析を依頼する。  

## 3.3. 条件緩和後の分析結果とSDKの優位性

1. **再分析の実行**: AIエージェントは再度プログラムを書いて、緩和された要求に合う物件を探す。  
2. **最終分析結果**: 「10分以内で2LDKまたは2DKの物件は6件見つかりました」と、データを分析した上で条件に合う物件を提案する。  
3. **内部処理の確認**: 内部ではプログラムを書いて分析が行われている。  
4. **従来の処理との比較**: 従来はCSVをテキスト化してラグシステムを作るか、独自のAIエージェントシステムを構築する必要があった。  
5. **SDKによる容易な構築**: Claude Agent SDKでは、データのフォルダー参照設定とプロンプト設定だけで、自立性を持ったチャットボットを簡単に作成できる。  
6. **大規模データへの対応**: データが何百、何千、何万行あっても、エージェントがプログラムを書いて適切なデータを見つけたり、需要予測やアンケート分析などの高度な分析も可能である。  

## 4. ワークフロー型アプリとAIエージェントの比較

## 4.1. 柔軟な応答能力の比較

1. **従来のチャットボット**: OpenAIやGoogleのモデルを利用して返答を生成するか、Difyのようなワークフロー型アプリで事前に処理を定義して運用されることが多い。  
2. **ワークフロー型の課題**: 事前に定義した処理以外の入力に対しては、良い返答が返ってきにくい。  
3. **AIエージェントの利点**: 入力に応じてAIが処理方法を判断して実行するため、より柔軟な返答が可能なチャットボットが作成できる。  

## 4.2. SDKの利便性と今後の展望

1. **SDKによる容易な実装**: 柔軟性ゆえの不確実性や実装の難しさがあるものの、Claude Agent SDKを使えば、プログラミング界隈で流行しているClaude CodeのクオリティでAIエージェントを簡単に組み込める。  
2. **今後の需要予測**: 今後、Claude Agent SDKや、先日リリースされたCodexのCode SDKのようなツールをチャットボットに組み込む需要が出てくると個人的には考えている。  

## 5. 公式情報とエージェントの具体例

## 5.1. 公式情報と利用可能なエージェントの種類

1. **公式情報**: 始め方とベストプラクティスは公式ブログにまとめられている。  
2. **Anthropic社内での利用**: Anthropic社内でも、ディープリサーチや動画作成、無数のノンコーディングアプリケーションに利用されている。  
3. **作成可能なエージェント例**:
    1. **ファイナンスエージェンツ**: ポートフォリオ分析や投資状況の評価を行う。  
    2. **旅行計画エージェンツ**: 予定を確認して旅行計画を立てる。  
    3. **カスタマーサポートエージェンツ**: 曖昧なユーザー入力に対しても正しく返答する。  
    4. **ディープリサーチエージェンツ**: 情報収集の効率化が可能である。  
4. **実践**: 簡単なものはすぐに作成できるため、実際に触って作成していく。  

## 6. Claude Agent SDKの技術的要件と利用方法

## 6.1. 利用言語と課金体系

1. **利用可能な言語**: 現在、Python (PYON) と TypeScript (Typrript) から利用可能である。  
2. **実行基盤**: 内部でClaude Codeが実行されるため、Claude CodeのサブスクリプションでSDKを利用できる。  
3. **課金体系**: Claude Codeを利用していない場合は、Claudeモデルを利用するためのAPI料金が発生する。  
4. **有料版ユーザー**: 現在Claudeを有料版で利用している場合は、Claude Agent SDKもそのまま利用可能である。  

## 6.2. 外部サービス連携と環境セットアップ

1. **外部サービス連携**: Amazon AWSやGoogle Cloudからも利用できる。  
2. **機能**: Claude Codeでできることは基本的に可能であり、サブエージェントの作成やMCP連携による外部サービス連携なども可能である。  
3. **プログラミング不要のアプリ作成**: プログラム経験がない人でも、Claude Codeのプラグイン機能を利用すれば、自然言語だけでバイブコーディング的にアプリを作成できる。  
4. **環境セットアップ**: まずPythonで環境セットアップを行うため、Claude Codeを使ってセットアップを依頼する。  
5. `uv`ツールの利用: Pythonの実行に必要なツールを管理する`uv`ツールを使用する。  
6. **セットアップの自動化**: 「環境のセットアップをしてください」と入力すれば、Claude Codeが自動でセットアップを完了する。  
7. **パッケージインストール**: Claude SDKのパッケージをインストールする必要があり、これも`uv`でClaude Codeにお願いしてインストールする。  
8. **利用可能状態**: これでClaude Agent SDKが使えるようになった。  

## 7. SDKの基本的な使い方とWeb検索機能の有効化

## 7.1. 基本的な利用方法とクライアントの選択

1. **利用方法の選択**: 使い方には「クエリー」と「Claude SDKクライアント」の2種類がある。  
2. **クライアントの選択理由**: SDKクライアントの方がサポートが充実しており、会話を継続できるため、こちらを使用する。  
3. **基本コード**: 非常に単純なコード（ほぼこれだけ）でエージェントを使用できる。  
4. **基本実行**: 基本コードを実行すると、「ハロークロード」という入力に対し、「ハロー、アイムクロード」といった返答が生成される。  
5. **オプション設定**: Web検索をさせたい場合やプロンプトを事前に設定したい場合は、オプション設定を渡す必要がある。  

## 7.2. Web検索機能の有効化と自律的な動作

1. **オプション設定項目**: システムプロンプトの設定や読み込むディレクトリーの設定などが可能である。  
2. **Web検索の有効化**: オプションとしてWebサーチを行えるように設定し、プロンプトを変更して実行する。  
3. **Web検索の実行**: エージェントが「cloudエージェントSDKについて調べて」という指示に基づき、Web検索を実行する。  
4. **自律的な動作**: エージェントは中で検索結果を解釈し、必要に応じて自律的に再検索を行うなど、ループ処理や次の処理判断を実装なしで実行してくれる。  
5. **検索結果のまとめ**: 最終的に「クロードエージェントSDKについてまとめました」という形で、検索結果をまとめてくれる。  
6. **検索ツールの変更**: 検索にはClaudeのWeb検索が使われるが、OpenAIなど他のサービスを使いたい場合は、そちらのツールを作成して与えれば利用可能である。  

## 7.3. 連携の柔軟性

1. **MCP連携**: MCPサーバー内でツールを定義し、そのサーバーを渡す形で自由に組み込むことができる。  
2. **利便性の総括**: かなり簡単にAIエージェントを利用できると感じられたはずである。  

## 8. Claude Codeプラグインによるノーコードでのアプリ構築

## 8.1. プラグイン機能の概要とセットアップ

1. **プログラミングの課題**: プログラミングができないと設計が難しい場合があるが、Claude Codeの方で自動でアプリを作成できる機能がある。  
2. **プラグイン機能の紹介**: Claude Codeのプラグイン機能を利用すると、自然言語入力からClaude Agent SDKを使ったアプリを簡単に作成できる。  
3. **プラグインの定義**: Claude Codeの様々な設定をパッケージ化し、使いやすくしたもの。サブエージェントの利用やMCPサーバーセットアップなど、複雑な設定をパッケージ化している。  
4. **マーケットプレイスの利用**: `/plugin`と入力すると利用可能なプラグインが表示されるが、最初にマーケットプレイスの追加が必要である。  
5. **公式マーケットプレイス**: Anthropicが出している公式のマーケットプレイスがあり、これはClaude CodeのGitHub上にある。  
6. **エージェントSDKデブプラグイン**: このプラグインを利用すると、Claude Agent SDKを使うために必要な情報が載ったドキュメントを利用してアプリを作成できる。  

## 8.2. プラグインのインストールとディープリサーチエージェントの作成

1. **マーケットプレイスの追加**: コマンドをコピーして貼り付けることで、マーケットプレイスの情報を追加する（初回のみ）。  
2. **プラグインのインストール**: `/plugin`コマンドで選択肢を表示し、「Browse & Install Plugins」から「Agent SDK Dev」プラグインを選択してインストールする。  
3. **アプリ作成の開始**: インストールされたコマンドを使い、アプリ作成を開始する。  
4. **言語とプロジェクト名の指定**: プログラム言語としてPythonを選択し、プロジェクト名を「Dsearch」とする。  
5. **エージェントの要件定義**: ユーザー入力に基づき、X、YouTube、Reddit、Archive、Mediumといったメディアから必要な情報を収集し、統合してまとめるリサーチエージェントの作成を依頼する。  
6. **実装の自動化**: Claude CodeがClaude Agent SDKの使用を読み取り、実装を自動で行ってくれる。  

## 9. ディープリサーチエージェントの実行と結果分析

## 9.1. エージェントの構造と実行フロー

1. **アプリの完成**: 「Dsearch」アプリが完成し、メインファイル（main.py）がエントリーポイントとなっている。  
2. **内部構造**: ユーザー入力からYouTubeやXなど、各情報ソースに対してサブエージェントを作成し検索を行っている。  
3. **フローの可視化**: メインエージェントがサブエージェントにタスクを渡し、各エージェントがウェブ検索で情報収集を行い、最後にそれらを統合してレポートを作成する流れになっている。  
4. **コード記述不要**: 何も自分でコードを書かずにここまで実装されている点に注目すべきである。  
5. **情報収集方法**: 各情報ソースからの情報は、APIを使わず、Claude Codeに搭載されている機能（Web Fetch）を使って収集されている。  

## 9.2. リサーチの実行とレポートの評価

1. **エージェントの起動**: クロードコードから`uv run main.py`と入力し、ディープリサーチエージェントを起動する。  
2. **リサーチ指示**: リサーチトピックとして「OpenAIの最新情報」を指定し、出力ファイル名を「OpenAI」とする。  
3. **並列実行**: 4つのリサーチサブエージェントが並列で起動し、調査を開始する。  
4. **完了とレポート生成**: 全てのリサーチが完了し、レポートが作成される。実行時間は約10分で、レポートの行数は1825行と網羅的であった。  
5. **レポート内容の確認**:
    1. **サマリー**: OpenAI最新情報の総合リサーチレポート2025としてサマリーが記載されている。  
    2. **最新情報**: 先週あったDevDay 2025の情報が反映されている。  
    3. **GPT-5情報**: GPT-5のリリースとベンチマーク精度が記載されている。  
    4. **不満点**: GPT-5に対する不満点もまとめられている。  
    5. **技術的ブレイクスルー**: Archiveの論文からOシリーズに関連する論文を探してきている。  
    6. **コーデックス情報**: YouTubeチャンネルの情報がまとめられている。  
6. **評価**: ChatGPTや従来のディープリサーチよりも細かくまとめられていることが確認できる。  
7. **今後の活用**: 自分の興味分野に関する情報収集エージェントを作成し、定期実行することで、毎朝の最新情報通知やレポート作成に利用できる。  

## 10. Claude Agent SDKの応用性と今後の展望

## 10.1. ワークフロー自動化と柔軟な修正能力

1. **ワークフロー自動化**: エージェントを使ったワークフローを自動で作れる状態であり、自然言語からワークフローを作るツール（例：Opal）と同様のことが可能である。  
2. **エラー修正能力**: 実行中にエラーが出た場合やうまくいかない箇所があった場合、エージェントが自動で修正してくれるため、機能追加や修正が柔軟に行える。  
3. **応用範囲**: ディープリサーチだけでなく、パーソナルエージェントの作成なども可能である。  
4. **推奨**: 有料プランでClaudeモデルを使用している場合は、一度試してみることを推奨する。  

## 10.2. 個人的な利用計画と総括

1. **筆者の利用計画**: 最近CLIの方を使っていたため、空きリソースでこのSDKを使い、YouTube作成や日頃の情報収集でどれくらい使えるか見ていく予定である。  
2. **総括**: デモは派手ではなかったかもしれないが、エージェント開発者にとっては非常に便利なツールであるため、一度触ってみるべきである。  
3. **関連技術の紹介**: 最近Anthropicからリリースされた「エージェントスキルズ」という機能も紹介されており、プログラムファイルを渡すと実行してくれる機能があり、これもClaude Agent SDKから触れられそうなので、今後試して共有する予定である。  

## 11. 動画の締めと関連書籍の紹介

1. **感想の募集**: 発表内容に対する感想があればコメントで教えてほしい。  
2. **動画の終了**: 本日の動画を終了する。  
3. **書籍紹介**: 筆者が出版した『0から分かるDifyの教科書』を紹介する。  
4. **書籍の内容**: Dify（AIを活用したアプリを簡単に作れるツール）の使い方をマスターするための入門書であるため、仕事で活用したい場合は書店で確認してほしい。  
5. **今後の予定**: Difyが新しくなっているため、今後まとめ動画も出す予定である。  
6. **視聴者への依頼**: 動画が良かった場合は高評価、コメント、チャンネル登録、およびスマホからのハイプボタンを押してほしい。  
7. **結び**: 本日も視聴ありがとうございました。次回の動画で会おう。バイバイ。
