# 0) スクショしてPDFにし、OCR処理した電子書籍を、「トピック境界（または「章」）」で分割して、NotebookLMにアップロードする

```bash
cd ~/books/ocr/
mkdir Claude Code によるAI駆動開発入門
```

```bash
set -euo pipefail

SRC="Claude Code によるAI駆動開発入門.pdf"
OUTDIR="Claude Code によるAI駆動開発入門"

mkdir -p "$OUTDIR"

qpdf "$SRC" --pages . 1-12  -- "$OUTDIR/00_前付け_読む前〜著者略歴.pdf"
qpdf "$SRC" --pages . 13-16 -- "$OUTDIR/ch01_01_1.1_AI支援開発の新時代とClaudeCode.pdf"
qpdf "$SRC" --pages . 17-26 -- "$OUTDIR/ch01_02_1.2_料金体系と制限_モデル選択_コスト管理.pdf"
qpdf "$SRC" --pages . 27-42 -- "$OUTDIR/ch01_03_1.3_アカウント登録_サブスク_API.pdf"
qpdf "$SRC" --pages . 43-56 -- "$OUTDIR/ch01_04_1.4_環境構築とセットアップ.pdf"
qpdf "$SRC" --pages . 57-75 -- "$OUTDIR/ch01_05_1.5_はじめてのClaudeCode_基本コマンドとモード.pdf"

qpdf "$SRC" --pages . 76-99  -- "$OUTDIR/ch02_01_5分でアプリを作る_基礎〜デプロイ.pdf"

qpdf "$SRC" --pages . 100-116 -- "$OUTDIR/ch03_01_アプリ開発の流れ_作成〜デプロイ準備.pdf"
qpdf "$SRC" --pages . 117-141 -- "$OUTDIR/ch03_02_デプロイとトラブルシュート_エラー対応_ログ.pdf"
qpdf "$SRC" --pages . 142-158 -- "$OUTDIR/ch03_03_GitHubActionsで追加実装_設定と運用.pdf"

qpdf "$SRC" --pages . 159-169 -- "$OUTDIR/ch04_01_並行処理の前提_コンテキスト窓_バックグラウンド_Workspace.pdf"
qpdf "$SRC" --pages . 170-184 -- "$OUTDIR/ch04_02_要件定義〜ガードレール_定義からコード生成_CICD_Husky.pdf"
qpdf "$SRC" --pages . 185-193 -- "$OUTDIR/ch04_03_タスク分割と実装_レビュー3手法_Issue駆動.pdf"
qpdf "$SRC" --pages . 194-234 -- "$OUTDIR/ch04_04_並行処理のコツ_サブエージェント_worktree_スラッシュコマンド_Hooks.pdf"

qpdf "$SRC" --pages . 235-243 -- "$OUTDIR/ch05_01_セキュリティ設計_プライバシー_サンドボックス_責任分界.pdf"
qpdf "$SRC" --pages . 244-246 -- "$OUTDIR/ch05_02_チーム開発での活用_設定共有_Bedrock_Vertex.pdf"
qpdf "$SRC" --pages . 247-269 -- "$OUTDIR/ch05_03_応用_Figma_ヘッドレス_仕様書駆動_Web_MCP_今後.pdf"

qpdf "$SRC" --pages . 270-281 -- "$OUTDIR/99_付録_索引.pdf"

echo "Done: created split PDFs in $OUTDIR/"
```

# 1) ノートの初期化（最初に1回だけ）

---

## 1-1. NotebookLMノートの“常時ルール”を固める（manifest運用）

### 目的

- NLMが勝手に補完しないようにする
- 生成物（表/スライド/図解）が「後工程（Canvas/Artifacts）」で再利用できるようにする

NotebookLMのソースに、次の内容のテキストを追加してください（ファイルでも貼り付けでも可）。

```markdown
目的：『Claude Code によるAI駆動開発入門』を、実務で使えるチェックリストとテンプレに変換する。

優先テーマ：

- セットアップ手順（ch01_04）
- 実運用の基本コマンド/モード（ch01_05）
- GitHub Actionsでの追加実装（ch03_03）
- 並行処理/サブエージェント/worktree/Hooks（ch04\_\*）
- セキュリティ/責任分界（ch05_01）

出力ルール：

- 本ノートのソース以外で推測しない。不明は不明。
- 章（ソース）ごとに、要点・手順・注意点を分ける。
```

### 作業

1. NLMで当該ノートを開く
2. ソース一覧で **`zz_manifest_このノートの目的と使い方.md` を常にON**にする
   - 以後、基本はON（ただし、インフォグラフィックのように“章を絞ってノイズを減らす”ときだけOFF可）

---

## 1-1b. Geminiのカスタム指示を設定する

Geminiで質問する際に「教材の記述」と「一般知識/最新情報」が混ざらないよう、カスタム指示を設定します。

- **設定ファイル**: `prompt/GemNLMアナリスト・メンター.md`
- **効果**: 回答が「忠実/統合/最新」の3モードで分離され、根拠の監査が可能になる

---

## 1-2. 初回の「全体地図」を作る（A0\_全体マップ）

### チェックON（正確指定）

- ON：`zz_manifest_このノートの目的と使い方.md`
- ON：`ch01_*`〜`ch05_*`（本文PDFは全部）
- OFF：`99_付録_索引.pdf`
- 任意：`00_前付け_...pdf`（本の狙い/対象読者を入れたいならON）

### NLM通常チャット（保存用）プロンプト

```
このノートの「今チェックされているソース」だけを根拠に、推測せずに回答してください。不明は不明と書いてください。

目的：この本を最短で実務に活かすための「読む順・捨てる順の地図」を作る。

出力：
1) 各ソース（PDF）ごとの実務翻訳タイトル（=仕事で言うと何の話か）
2) 各ソースの要点（最大7点）
3) 各ソースの実務での使いどころ（判断/作業/レビュー観点）
4) 目的別の読む順（A:最短/B:標準/C:網羅）
5) スキップ候補（経験者なら飛ばせる可能性が高い箇所）と理由

制約：
- 各項目に必ず根拠ソース名（ファイル名）を付ける
- 本文にない断定はしない
```

→ `メモに保存`
→ `ソースに変換`
→ `ソース名を変換`
→ 「`A0_全体マップ（読む順・捨てる順）`」

---

## 1-3. “運用する表”を作る（Data Tableはここで全て作り切る）

ここからが「見て、ふーん」で終わらない核です。
**運用は全部 Data Table に統一**します。

---

### 1-3-1. DT_A1 索引（用語/コマンド/機能）【運用本体】

#### チェックON（正確指定）

- ON：`ch01_05_1.5_はじめてのClaudeCode_基本コマンドとモード.pdf`
- ON：`ch04_04_並行処理のコツ_サブエージェント_worktree_スラッシュコマンド_Hooks.pdf`
- 任意で追加ON：`ch04_01_並行処理の前提_...pdf`（用語が多いなら）
- OFF：その他全部（まずは絞る）

#### Data Table「説明」欄に貼る

```
目的：Claude Codeの索引（検索・更新用辞書）をData Tableで作る。

制約：
- 参照は今チェックされているソースのみ。推測禁止。不明は不明。
- 余計な解説文は禁止（行として出さない）。
- 種別（Type）は必ず分類する。

列定義（この順で固定）：
- Term（項目名）
- Type（コマンド/機能/モード/ファイル/ショートカット/概念 のどれか）
- Definition（1文）
- WhenToUse（具体シーン1つ）
- Pitfall（本文にある注意点のみ）
- Source（ファイル名）
- Section（節番号）
- Confidence（高/中/低）
```

→ 生成後、可能ならSheetsにエクスポートし、列を追加：

- `自分の例` / `試した日` / `結果` / `補足`（運用ログ）

---

### 1-3-2. DT_01 セットアップ分岐表（共通/サブスク/API）

#### チェックON

- ON：`ch01_03_1.3_アカウント登録_サブスク_API.pdf`
- ON：`ch01_04_1.4_環境構築とセットアップ.pdf`
- OFF：その他全部

#### Data Table「説明」

```
目的：Claude Code を「初回から開発できる状態」まで到達するための、分岐つきセットアップ手順表を作る。

制約：
- 参照は今チェックされているソースのみ。推測禁止。不明は不明。
- サブスク経路とAPI経路が混ざらないように、各行に必ず対象（共通/サブスク/API）を付ける。
- 秘密情報は <PLACEHOLDER> と表記する。

列定義：
- StepNo
- 対象（共通/サブスク/API）
- やること
- 成功条件
- つまずきポイント
- 根拠（Source + 節番号）
- 優先度（必須/推奨/任意）
- 備考
```

→ Sheets化して、`自分の環境メモ`列を追加

---

### 1-3-3. DT_02 料金/制限/モデル/コスト管理（判断表）

#### チェックON

- ON：`ch01_02_1.2_料金体系と制限_モデル選択_コスト管理.pdf`
- OFF：その他全部

#### Data Table「説明」

```
目的：料金/制限/モデル切替/コスト管理を「運用判断に使える表」にする。

制約：
- 参照は今チェックされているソースのみ。推測禁止。不明は不明。
- 数値や仕様を勝手に補完しない。

列定義：
- 判断テーマ
- 結論（1文）
- 判断基準（何を見て決めるか）
- 具体例（状況例）
- リスク/落とし穴
- 推奨アクション
- 根拠（Source + 節番号）
- Confidence（高/中/低）
```

→ Sheets化して、`自分のプラン`列を追加

---

### 1-3-4. DT_03 基本コマンド/モード/許可（チートシート）

#### チェックON

- ON：`ch01_05_1.5_はじめてのClaudeCode_基本コマンドとモード.pdf`
- OFF：その他全部

#### Data Table「説明」

```
目的：基本コマンド/機能/モード/許可・パーミッションを、迷わず使うためのチートシート表を作る。

制約：
- 参照は今チェックされているソースのみ。推測禁止。不明は不明。
- 本文にないコマンド例は作らない（空欄でよい）。

列定義：
- 項目名
- 種別（コマンド/機能/モード/許可）
- 何ができるか（1文）
- いつ使うか（具体シーン）
- 最小例（本文にある場合のみ）
- 注意点/落とし穴
- 根拠（節番号）
- 重要度（毎日/時々/特殊）
```

→ DT_A1（索引）とリンクするので、両方あると強い

---

### 1-3-5. DT_04 並行処理・サブエージェント・worktree・スラッシュ・Hooks（運用判断表）

#### チェックON

- ON：`ch04_01_並行処理の前提_...pdf`
- ON：`ch04_04_並行処理のコツ_...pdf`
- OFF：その他全部

#### Data Table「説明」

```
目的：並行処理・サブエージェント・worktree・スラッシュコマンド・Hooks を「いつ/どう使うか」運用レベルで整理する。

制約：
- 参照は今チェックされているソースのみ。推測禁止。不明は不明。
- 判断条件（使うタイミング）を必ず言語化する。

列定義：
- テクニック名
- 狙い（解決したい問題）
- 使うタイミング（判断条件）
- 最小手順（本文にある場合のみ）
- 副作用/リスク
- ガードレール
- 根拠（Source + 節番号）
- Confidence（高/中/低）
```

→ ここが社内共有で刺さりやすい

---

### 1-3-6. DT_05 GitHub Actions（追加実装・診断表）

#### チェックON

- ON：`ch03_02_デプロイとトラブルシュート_エラー対応_ログ.pdf`
- ON：`ch03_03_GitHubActionsで追加実装_設定と運用.pdf`
- OFF：その他全部

#### Data Table「説明」

```
目的：GitHub Actionsで詰まるポイントを「症状検索できる診断表」にする。

制約：
- 参照は今チェックされているソースのみ。推測禁止。不明は不明。
- 症状は検索しやすい短文にする。

列定義：
- シーン（設定/実装/実行/デバッグ/運用）
- 症状（ログや現象）
- 原因候補（本文範囲）
- 対処手順（本文手順）
- 再発防止（本文範囲）
- 根拠（Source + 節番号）
- 優先度（必須/推奨/任意）
```

→ 社内で「困ったらこの表」が作れる

---

### 1-3-7. DT_06 セキュリティ・責任分界（作業前チェック表）

#### チェックON

- ON：`ch05_01_セキュリティ設計_プライバシー_サンドボックス_責任分界.pdf`
- OFF：その他全部

#### Data Table「説明」

```
目的：Claude Codeを安全に使うための「作業前チェック表」を作る（やっていい/ダメ/条件付き、ガードレール）。

制約：
- 参照は今チェックされているソースのみ。推測禁止。不明は不明。
- 秘密情報は <PLACEHOLDER> 表記。
- 条件付きは条件を必ず書く。

列定義：
- テーマ（データ取扱い/実行権限/コンテナ/サンドボックス/責任分界）
- 結論（やる/やらない/条件付き）
- 具体的ガードレール
- 事故パターン
- 事前チェック
- 根拠（節番号）
- 優先度
```

→ これも社内共有向き

---

## 1-4. “理解用（ラフ）”と“共有用（編集可能）”の出し分けを初期設定する

ここがあなたの質問（インフォグラフィック/スライド）を踏まえた確定ルールです。

### ルール

- **自分がサッと理解したい**
  - **全体像把握（インプット）**: NLM Studio の **動画/音声/スライド**を使ってOK（多少崩れ許容）
  - **局所的理解補助（学習中）**: NLM Studio の **インフォグラフィック**を使ってOK（読書中にわからない箇所を図解）
- **社内共有/プレゼンに使う**
  → NLMは「設計図（Spec）」を吐く係にして、**Canvas or Artifactsで編集可能成果物**を作る

---

# 2) 学習セッション（毎回の運用：どこで読書し、どこで手を動かし、どこでNLM/Gem/Claudeを使うか）

## 2-1. 今日のテーマを1つ決める（例）

- 例A：並行処理/サブエージェント（`ch04_01 + ch04_04`）
- 例B：セキュリティ責任分界（`ch05_01`）
- 例C：GitHub Actions運用（`ch03_02 + ch03_03`）

---

## 2-2. まず“ラフ理解”が欲しいなら（任意：5分）

### チェックON

- 今日の章だけON（他OFF）
- `zz_manifest` はONでもOFFでもOK（短時間ならON推奨）

### NLM Studio（任意）

- **動画/音声/スライド**で全体像を俯瞰（崩れ許容）
  - 動画: `prompt/NLM動画解説プロンプト3.md` + `prompt/NLM動画解説カスタムスタイル.md`
  - 音声: `prompt/NLM音声解説プロンプト.md`
  - スライド: `prompt/NLMスライド資料プロンプト.yml`
- **インフォグラフィック**は「全体俯瞰」より「読書中の局所的理解補助」向き（v3参照）
  - 使うなら: `prompt/NLMインフォグラフィック.md`

---

## 2-3. 次に“実務で使う形（表）”に落とす（10〜20分）

- 今日のテーマに対応する Data Table（DT_04 / DT_05 / DT_06 など）を開く
- **ソースチェックを今日の章に合わせてON**
- 生成し直す or 差分更新
- Sheetsにエクスポートしているなら `自分の例/結果` を追記

---

## 2-4. 読書はどこでやる？

**“表の根拠になっている箇所だけ”を読む**のが基本です。

- Data Tableの各行に「節番号」がある
  → その節をGoodNotesで確認
  → すぐ試せるものは試す

---

## 2-5. 手を動かす（必須）

- Claude Codeで最小実験（例：DT_04のテクニックを1つ）
- 失敗したら、そのまま NLM へ症状を投げる（DT_05があるなら診断表に寄せる）

---

## 2-6. セッション終了時（武器化チェック：5分）

あなたの既存の「3つの問い」をそのまま使ってOKです。
答えられなければ「どの行（どの表）が弱いか」が分かるので、次回そこだけ再学習。

- さらに壁打ちしたいなら：Gemini のガイド付き学習（プロンプト: `prompt/GemNLM質問（ガイド付き学習）.md`）→ 最後に「3つの問い」で自己テスト

---

# 3) 社内共有/プレゼン用：スライドとインフォグラフィックをCanvas/Artifactsで作る（省略なし）

ここからは **NLM＝設計図生成**、**Canvas/Artifacts＝最終成果物**です。

---

## 3-A. 社内用スライド（Canvas推奨 / Artifactsも可）

### 3-A-1. NLMでSlideSpecを作る（Data Table推奨／通常チャットでも可）

#### チェックON（原則）

- ON：`zz_manifest`
- ON：共有したい範囲の章だけ（例：並行処理なら `ch04_01 + ch04_04`）
- OFF：関係ない章
- OFF：`99_付録`

#### Data Table「説明」（スライド設計図テーブル）

```markdown
目的：
このノートで「今チェックされているソース」だけを根拠に、後工程（Gemini Canvas / Googleスライド）で
社内共有向けの“編集可能スライド”を作るための SlideSpec（設計図）を Data Table として作る。

絶対ルール：

- 根拠は「チェックされているソースのみ」。推測禁止。不明は不明と明記。
- 1スライド=1メッセージ（結論/主張）。slide_title は名詞句NG、言い切り。
- 1スライドの要点は最大3つ（bullets_1〜3）。短く。
- “機能しないUI（Prev/Next等のボタン風装飾）”は禁止（diagram_specにも書かない）。
- 図はSVG前提にしない。Googleスライドの「図形・線・矢印・テキストボックス」で再現できる粒度で diagram_spec を書く。
- スライド枚数は上限を決めない（情報量を落とさない）。ただし詰め込み禁止。
  - bulletsが3つに収まらない → スライドを分割
  - diagram_specのblocksが8個を超える → 図を単純化より“分割”を優先
  - 1枚で2つ以上の主張を扱わない

枚数ガード（必須）：

- 最低スライド枚数（=Data Table行数）は 12。
- もし初回出力が 12 行未満になったら、次を守って「増やして再出力」すること：
  - 情報量を落とさず、主張の単位でスライドを分割して行数を増やす
  - bulletsが3つに収まらない箇所、diagram_specのblocksが8を超える箇所を優先的に分割する
  - 再出力でも推測は禁止。不明は不明のまま

出力（Data Table列）：

1. slide_no（1,2,3...）
2. slide_title（結論/主張を1行。言い切り）
3. one_liner（30文字以内）
4. bullets_1（40文字以内）
5. bullets_2（40文字以内）
6. bullets_3（40文字以内）
7. example（現場適用例。60文字以内）
8. layout（次から1つ：2_split_contrast / 3_column_air / 4_grid_matrix / timeline_flow / mechanism_diagram / text_only）
9. diagram_spec（図形で再現できるレベルの指示。必ず以下の形式で書く）
   - blocks: [ {id, label, shape(rect|rounded|pill), emphasis(true|false)} ... ]
   - arrows: [ {from, to, label(optional), type(arrow|line)} ... ]
   - notes: [ {target, text} ... ]
10. speaker_notes（発表者向け補足。任意）
11. sources（必須。根拠：ソース名 + 節番号。複数可）

品質ゲート（出力前セルフチェック）：

- 先頭に「想定スライド枚数（=行数）」を1行で宣言してから、Data Tableを出力したか
  例：想定スライド枚数：18
- 全行に sources が入っているか（空欄禁止）
- slide_title が結論の言い切りになっているか（名詞句になっていないか）
- bullets が各行3つ以内か（超える論点は分割できているか）
- diagram_spec が「図形で作れる粒度」か（UI装飾になってないか）
- diagram_spec の blocks が 8 を超えていないか（超えるなら分割したか）
```

→ Data Table機能が使えない場合は、通常チャットで同形式の表を出力して次工程へ貼る  
→ 出来たら、必要ならSheets化

---

### 3-A-2. Canvasでスライド生成（共有向け）

Canvasに、SlideSpec（表の内容）を貼って指示します。

```markdown
あなたはスイススタイル基調のスライドデザイナーです。
入力された SlideSpec（入力内容 or 添付ファイル）から、「Googleスライドへ書き出して編集可能」なプレゼンを作ります。

# ゴール（デザイン・品質）

- 16:9 スライド
- スイススタイル（余白・整列・線・グリッドの統一）
- モノクロ（白/黒/グレーのみ、影・グラデなし）
- 共通グリッド：左＝テキスト、右＝図解（図形で作る）
- 日本語は短く、可読性最優先（文字化け/簡体字っぽい字形を避ける）
- 外部画像URL・スクショ・既存図貼り付けは禁止（図は“Googleスライドの図形”で再現）
- 機能しないUI（Prev/Next等）を描かない
- 右側背景は“無地（白）”を基本にする（細かいグリッド背景は禁止。必要ならガイド線は数本まで）
- footer右下に必ず入れる（小さく）：
  FIG. {slide_no} / {sources}

# 生成ルール（厳守）

- SlideSpecの各行＝スライド1枚
- slide_title は大きく「結論の言い切り」
- bullets_1〜3 を左側に箇条書き（最大3つ）
- example は左下（小さめ）に1行
- diagram_spec は右側の「図形・線・矢印・ラベル」だけで忠実に再現（アイコンも図形の組み合わせのみ）
  - emphasis=true のblockだけ薄いグレーで強調（影は使わない）
- 余白、線幅、見出しサイズ、本文サイズ、フッター位置は全スライドで統一

# エクスポート失敗を避けるための注意（必須）

- “埋め込み”や“画像生成”を使わない。使うのはテキストボックス＋図形＋線＋矢印のみ。
- 透明度、マスク、複雑なグループ、特殊効果は使わない（Googleスライド化で崩れる要因になるため）。
- 右側の図は「要素数を増やしすぎない」。複雑な図は「分割」で解決する。

# 出力形式

- Canvas上で「プレゼンテーション」として作成できる形式で出力する。
- その後、可能なら Googleスライドへエクスポートできる前提で作る（私は後でエクスポート操作を行う）。

# 入力（SlideSpec）

- 入力内容 or 添付ファイル
```

→ 最後にGoogle Slidesに書き出して微修正

---

## 3-B. 社内用インフォグラフィック（HTML資産化：Claude Artifacts / Gemini Canvas 共通）

### 3-B-1. NLMでInfographicSpecを吐く（通常チャット推奨）

#### チェックON（原則：絞る）

- インフォグラフィックは **1枚=1テーマ**で作る（品質が安定する）
- 章を絞るほど、内容が「薄まらず」「平均化されず」精度が上がる
- `99_付録_索引.pdf` は基本OFF（ノイズになりやすい）

#### チェックON（テーマ別の固定例）

- テーマ① 並行処理・サブエージェント・worktree・スラッシュ・Hooks
  - ON：`ch04_01_並行処理の前提_...pdf`
  - ON：`ch04_04_並行処理のコツ_...pdf`
  - OFF：上記以外すべて（`99_付録_索引.pdf`含む）
- テーマ② セキュリティ・責任分界
  - ON：`ch05_01_セキュリティ設計_プライバシー_サンドボックス_責任分界.pdf`
  - OFF：上記以外すべて
- テーマ③ GitHub Actions運用（追加実装・診断）
  - ON：`ch03_02_デプロイとトラブルシュート_エラー対応_ログ.pdf`
  - ON：`ch03_03_GitHubActionsで追加実装_設定と運用.pdf`
  - OFF：上記以外すべて

#### NLM通常チャット（設計図）プロンプト（YAML固定）

````markdown
このノートで「今チェックされているソース」だけを根拠に、推測せずに回答してください。不明はTBDにしてください。

目的：
横長16:9の“社内共有向けインフォグラフィック”を、後工程（Gemini Canvas / Claude Artifacts）で編集可能なHTMLとして生成するための設計図（InfographicSpec）を作る。

絶対ルール：

- 根拠はチェックされているソースのみ。本文にない断定は禁止。
- 1枚=1メッセージ（top_messageは結論の言い切り1文）
- 各ブロックの箇条書きは最大3点（checklistのみ最大5点）
- 各項目に必ず根拠（ファイル名 + 節番号）を付ける
- 図形は「四角/角丸/線/矢印/小ラベル」で表現できる粒度にする（装飾やアイコン前提は禁止）

出力形式（YAML、キー順固定、コードブロックで）：

```yaml
title:
top_message:
blocks:
  context:
    items:
      - text:
        evidence:
  flow:
    steps:
      - label:
        text:
        evidence:
  solution_insight:
    items:
      - text:
        evidence:
  implications:
    items:
      - text:
        evidence:
  checklist:
    items:
      - text:
        evidence:
  anti_patterns:
    items:
      - text:
        evidence:
layout_spec:
  grid:
    - area: top
      description:
    - area: left
      description:
    - area: center
      description:
    - area: right
      description:
    - area: bottom
      description:
  diagram_spec:
    blocks:
      - id:
        label:
        shape: rounded|rect|pill
        emphasis: true|false
    arrows:
      - from:
        to:
        label:
        type: arrow|line
footer:
  fig_label: 'FIG. 01 / Claude Code'
  footnote_evidence_policy: '各項目のevidenceを脚注に集約（重複はまとめる）'
quality_gate:
  - 'top_messageが結論の言い切りになっている'
  - '各items/stepsにevidenceが入っている'
  - '推測がない（TBDで止めている）'
  - 'diagram_specが過剰装飾前提になっていない'
```
````

---

### 3-B-2. インフォグラフィックHTMLを生成（Claude Artifacts / Gemini Canvas 共通プロンプト）

````markdown
あなたは資料デザイナー兼フロントエンド実装者です。入力のInfographicSpec（YAML）の内容のみを根拠に、編集可能なHTMLインフォグラフィック（単一ファイル）を作成してください（推測禁止、TBDはTBDのまま表示）。

## 出力形式（厳守）

- 出力はHTML1本のみ（説明文や前置きは一切出さない）
- （Claude）artifact: infographic.html として出力
- （Canvas等）HTMLをコードブロックでそのまま出力

## 基本要件（厳守）

- 1ファイル完結HTML（CSS/JS埋め込み、外部依存なし）
- 16:9横長（1600x900基準）、レスポンシブで比率維持（縮尺で崩れない）
- モノクロ（白/黒/グレーのみ）、余白多め、整列最優先（影・グラデ・画像は禁止）
- フォント：`Noto Sans JP`, `Yu Gothic`, `Hiragino Sans`, `sans-serif` を `font-family` に含める（外部フォント読み込み禁止／中華フォント禁止）
- レイアウトはCSS Gridで固定（Top / Left / Center / Right / Bottom）
- 右下に `footer.fig_label` を必ず入れる
- evidenceは本文を汚さない：脚注として下部に小さく集約して表示（各項目のevidenceを列挙）
- 1ブロックの箇条書きは最大3点（checklistのみ最大5点）を厳守
- 画像URL、外部CSS/JS（CDN含む）は禁止

## レスポンシブ定義（崩れ防止・厳守）

- ページ本体コンテナは `aspect-ratio: 16 / 9` を使用し、`width: min(1600px, 100vw)` を基本とする
- 16:9枠内で「相対関係が維持」されること（狭い画面で文字やブロックが重ならない）
- すべてのグリッド子要素（Top/Left/Center/Right/Bottom）は `min-width: 0` を必ず指定する（折返しとオーバーフロー防止）
- 全テキストに `overflow-wrap: anywhere; word-break: break-word;` を適用し、長文でレイアウトが破綻しないようにする

## グリッドレイアウト仕様

- 列比率： 左 : 中央 : 右 = `1 : 1.2 : 1`
  - YAMLに `layout_spec.column_ratio` が存在する場合はそれを優先
- 行比率（推奨）： top / main / bottom = `0.16 / 0.64 / 0.20`（比率はCSSで維持）
- main行は「Left/Center/Right」それぞれを上下2分割して配置する（重なり禁止・絶対配置に依存しない）

| グリッドエリア       | 配置するYAMLキー                                    |
| -------------------- | --------------------------------------------------- |
| top                  | `title`, `top_message`                              |
| left上               | `blocks/context`                                    |
| left下               | `blocks/flow`                                       |
| center上             | `blocks/solution_insight`                           |
| center下             | `layout_spec/diagram_spec`                          |
| right上              | `blocks/implications`                               |
| right下              | `blocks/checklist`                                  |
| bottom（左〜中）     | `blocks/anti_patterns`                              |
| bottom（右 or 下段） | 脚注（`footer/footnote_evidence_policy`に従い集約） |
| fig_label            | `footer/fig_label`（右下固定）                      |

## 表示仕様（InfographicSpec → HTML対応）

- title：最上段タイトル（h1）
- top_message：タイトル直下に1文で表示（結論の言い切り）
- blocks/context：左上（箇条書き）
- blocks/flow：左下（stepを番号付きで縦に並べ、矢印で接続）
- blocks/solution_insight：中央上（箇条書き）
- layout_spec/diagram_spec：中央下（blocks/arrowsを「図形・線・矢印・小ラベル」で最小描画。過剰装飾しない）
- blocks/implications：右上（箇条書き）
- blocks/checklist：右下（チェックボックス風の箇条書き）
- blocks/anti_patterns：下段（横3分割などで配置。強調しすぎない）
- footer/fig_label：右下に小さく表示
- evidence：本文に表示しない。脚注へ集約（TBDはTBDのまま）

## タイポグラフィ階層（厳守）

- 基本の文字サイズは「狭い画面で縮む」ように `clamp()` 等でスケーリングしてよい（ただし相対階層は維持する）

| 要素                   | フォントサイズ（目安） | 備考                                                |
| ---------------------- | ---------------------- | --------------------------------------------------- |
| h1（title）            | 1.5rem                 | font-weight: 700                                    |
| h2（セクション見出し） | 0.75rem                | font-weight: 600, uppercase, letter-spacing: 0.08em |
| 本文・リスト           | 0.8rem                 | line-height: 1.6                                    |
| 脚注                   | 0.6rem                 | color: #888                                         |
| fig_label              | 0.7rem                 | font-weight: 600                                    |

## diagram_spec の描画ルール

- 図は基本CSSで表現（必要なら最小限のSVGは可、外部依存なし）
- SVGを使う場合は `viewBox` を必ず設定し、親要素にフィットさせる
- 図のサイズ目安：
  - 最小高さ：`220px`
  - 最大高さ：center下エリアに収まる範囲（`clamp(220px, 28vh, 340px)` など可）
  - 図が原因で他領域と重なるのは禁止（収まらない場合は縮尺で収める）

### shape定義（厳守）

| shape値   | 描画                              |
| --------- | --------------------------------- |
| `pill`    | 両端が完全な半円（rx = height/2） |
| `rect`    | 角丸なしの矩形                    |
| `rounded` | 小さな角丸（rx: 6px程度）         |

### arrows定義（厳守）

| type値  | 描画               |
| ------- | ------------------ |
| `arrow` | 終点に三角矢印あり |
| `line`  | 矢印なしの直線     |

### emphasis（厳守）

- `emphasis: true` のノードは `stroke-width: 2.5px` 程度に太くする（通常は 1〜1.5px）

## evidence（脚注集約の実装ルール）

- 各箇条書き／各ステップ／各anti_pattern／各diagram要素に `data-evidence` 等でevidenceを保持してよい
- JSで重複をまとめ、脚注に自動集約して表示してよい
- 脚注は本文の可読性を損ねないサイズ・色で、レイアウトを崩さない（折返し可／重なり禁止）

## 入力（このYAMLのみを根拠にする）

```yaml
（ここにInfographicSpec YAMLを挿入）
```
````

→ これが「社内共有で直せる」最終資産になる

# 4) まとめ（運用ルールを一文で）

- **自分用の速読**：NLM Studio（多少崩れてもOK）
- **社内共有/プレゼン**：NLMでSpec生成 → Canvas/Artifactsで編集可能成果物

---

必要なら、次に「どのテーマでインフォグラフィック1枚を作るか」を **1つだけ**選んでください（質問ではなく選択肢です）。選んだものに合わせて、**チェックONにするソースを固定した状態**で、InfographicSpecの「TopMessage（結論1文）」までこちらで初期案を確定して出します。

- ① 並行処理・サブエージェント（`ch04_01 + ch04_04`）
- ② セキュリティ責任分界（`ch05_01`）
- ③ GitHub Actions運用（`ch03_02 + ch03_03`）
