---
name: task-planner
description: 変更を最小差分で進めるために、作業を小さなステップに分割し、各ステップの入力/出力/検証コマンドを明確化する（実装前の計画専用）
---

# Task Planner

## 目的

- 実装に入る前に、作業を「小さな検証可能ステップ」に分割する。
- 各ステップで「何を読むか」「何を変えるか」「何で検証するか」を固定し、事故率を下げる。

## いつ使うか

- 影響範囲が不明な修正
- 既存仕様・既存テストがあるリポジトリでの変更
- リファクタ/置換/移行など、差分が膨らみやすい作業

## いつ使わないか

- 1ファイル内の数行修正など、計画を書くより早い作業
- すでに手順が明確で、実装→テストだけで完了する作業

## 出力フォーマット（必須）

1. ゴール（1行）
2. 変更方針（最小差分・非推測・既存挙動維持）
3. ステップ（番号付き、各ステップに以下を含める）
   - 読む（対象ファイル/箇所）
   - 変える（具体的な差分の意図）
   - 検証（実行コマンド）
   - 完了条件（合否判定）
4. リスクと回避策（最大3つ）
5. 追加で確認が必要な点（不明点があれば TODO として列挙）

## 重要な制約

- 推測で仕様を埋めない。不明な点は TODO 化するか、最小の仮実装に留める。
- 「見た目の整形」や「不要なリネーム」など、目的に直結しない変更を混ぜない。
- 各ステップは、git diff でレビュー可能なサイズに抑える。
