# マルチサービス統合プロジェクト ガイドライン

> Motto: "サービス境界を越えた整合性と、子リポジトリへの即座解決"

---

## 0. サービス名言及時の即座解決（最優先）

ユーザーが特定の子サービスに言及した場合、AI は以下のパスを即座に Read し、コンテキストを同期せよ。

- **対象**: `admin-dashboard`, `customer-app`, `backend-api`, `shared-lib` 等
- **アクション**: 言及された瞬間に `{サービス名}/AGENTS.md` をロードせよ。
- **制約**: `find` や `glob` による探索は禁止。ディレクトリ構造を既知として直接アクセスせよ。

---

## 1. 前提と共有リソース

サービス全体で共有される「真実のソース」を常に参照せよ。

- **全体概要**: @README.md
- **共通技術スタック**: @technologystack.md
- **統合ディレクトリ構造**: @directorystructure.md

---

## 2. 横断的タスク実行規約

### 2.1 サービス間依存関係の検証

- **変更の連鎖**: 1つのサービス（例: API）の変更が他のサービス（例: Dashboard）に影響する場合、必ず両方のリポジトリのコードを Read し、不整合を検出せよ。
- **共有ライブラリ**: 共通コードの変更は、依存する全てのサービスでのビルド・テスト確認を必須とする。

### 2.2 作業プロトコル

- **ルール優先度**: 本ファイルの指示 ＞ global（UserRules）。競合時は本ファイルを優先。
- **タスク分類と報告**: global 層の「Part 3: タスク管理システム」を厳守せよ。本階層で個別のテンプレは定義しない。

---

## 3. 実務上のガードレール

- **文字コード・形式**: 各サービスで異なるエンコーディング（UTF-8, SJIS等）が混在している可能性がある。処理前に必ず `read_file` で既存の形式を検知せよ。
- **機密情報の保護**: global 層の安全規約に従い、親ディレクトリから子ディレクトリの `.env` 等を絶対に跨いでロード・出力しないこと。
- **技術文書の正確性**: サービスを横断する仕様書を作成する場合、必ず一次情報の URL を併記し、事実と推論を厳密に区別せよ。

---

## 4. 作業前最終チェックリスト

- [ ] 指示されたサービスの子ディレクトリにある `AGENTS.md` をロードしたか。
- [ ] 変更が他のリポジトリ（API、共有型定義等）に影響を与えないか確認したか。
- [ ] 報告フォーマットは global 層の規定に従っているか。
