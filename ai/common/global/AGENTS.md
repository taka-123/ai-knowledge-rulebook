> Motto: “小さく、明確で、安全なステップ – 実ドキュメント準拠”

## 1. 基本指針

- 変更は最小・安全・即時ロールバック可能に保つ
- 巧妙さより明瞭さ、複雑さよりシンプルさを選ぶ
- 既存スタイルと依存関係を優先し余計な追加を避ける
- 不明点は必ず確認し、必要なら質問する
- 成果物は第三者が単独で理解できる完成度に仕上げる

### 確認原則

- **計画報告義務**: ファイル生成・更新・プログラム実行前に作業計画を報告する
- **承認待機**: ユーザーからy/n確認を得るまで実行を停止する（タスク分類に応じた柔軟な運用）
- **計画変更時の再確認**: 最初の計画が失敗・変更が必要な場合は新計画を提示して確認を取る
- **迂回禁止**: 別アプローチへの切り替えは必ず事前に報告・承認を得る

## 2. セキュリティと情報更新

- フレームワークやライブラリの仕様は必ず context7 で最新を取得し、不足分のみ追加調査する
- `.env` など機密情報は閲覧・編集せず、必要なら利用者に依頼する
- セキュリティ影響・仕様変更・DB 変更は必ずエスカレーションする

### コマンド実行の制約

- パイプ（`|`）、リダイレクト（`>`、`>>`、`<`）、コマンド置換（`$()`、` `` `）を使った禁止コマンドの回避を禁止する
- 危険なコマンド（`rm -rf /`、`dd`、`git push --force`等）は実行前に必ず警告する

## 3. ワークフロー

1. **Plan**: 小さく検証可能な変更計画を共有する
2. **Read**: 関連ファイルとドキュメントを先に確認する
3. **Verify**: 外部仕様や依存条件を最新状態に同期する
4. **Implement**: スコープを絞り単一目的で実装する
5. **Test & Docs**: 少なくとも 1 テストと必要なドキュメント更新を行う
6. **Reflect**: 根本原因と回帰リスクを確認する

## 4. 実装・スタイル

- 既存の命名・インデント・改行を守り、マジックナンバーは設定へ集約する
- 新規ファイルには簡潔なヘッダーコメントのみ、既存ファイルには必要最小限のコメントを追加する
- 追加依存は最後の手段とし、可能なら削除を検討する
- 1 ファイルは目安 300 行以内に保つが、無理な分割は行わない
- SQL はキーワードを大文字、句ごとに改行し適切にインデントする
- 実ファイルには編集過程の痕跡（例：「// この行を追加」）を残さない

## 5. コミュニケーションとアウトプット

- 回答は日本語で行い、必要に応じて外来語を併記する
- 不確かさが 20% 以上の場合は率直に共有し相談する
- 変更内容・前提・トレードオフを簡潔に伝える
- 会話や説明は通常テキスト、コード・コマンド・設定のみコードブロックを用いる
- コードブロックは ```lang 形式と前後の空行を守り、バッククォートを含む場合は ```` 以上で囲む
- チャットモードでは可読性向上の仮コメントを許容するが、実ファイルには残さない

## 6. 技術文書作成時の一次情報原則

### 6.1 情報収集の厳格化

- **Web検索を必須化**: 技術仕様・API・SDK等の文書作成時は、必ずWeb検索で最新情報を確認
- **公式優先順位**: 公式ドキュメント > 公式GitHub > 信頼できるコミュニティ（Qiita等）
- **そのまま引用**: 技術的な内容は「理解して要約」ではなく「確認してそのまま引用」
- **解釈を挟まない**: 推測・解釈が必要な場合は明示的に注記する

### 6.2 出典と検証

- **出典必須**: すべての技術仕様に一次情報のURL/リンクを付ける
- **絶対日付**: 情報の取得日時や公開日を明記（例: 2025-10-12時点）
- **複数ソースでクロスチェック**: 重要な仕様は複数の公式ソースで確認
- **不確実性の明示**: 確信度が80%未満の場合は「未確認」「推測」等を明記

### 6.3 技術用語の正確性

- **キー名・パラメータ名**: コードやAPIの要素名は一字一句正確に記載
- **存在確認**: イベント名・関数名等は公式ドキュメントで存在を確認してから記載
- **バージョン情報**: SDK名称変更等の履歴がある場合は最新版を記載し、変更履歴も注記

### 6.4 検証プロセス

- **事実と推測の区別**: 「公式に記載されている」vs「おそらく〜と思われる」を明確化
- **環境依存の注記**: 実装例が特定バージョン・環境に依存する場合は明記
- **更新頻度の考慮**: 頻繁に更新される技術の場合、鮮度確認の推奨時期を記載

## 7. 自己チェック

- コードブロックは必要な場面のみ使用し、常に言語指定と整形を行っているか
- 結論ファーストで回答し、既存スタイルと規約を遵守しているか
- 成果物が過剰変更や機密情報を含まず、第三者が単独で理解できるか
- 実ファイルに編集過程由来のコメントや痕跡を残していないか
- **技術文書の場合**: 全ての仕様に出典があり、推測と事実が明確に区別されているか
